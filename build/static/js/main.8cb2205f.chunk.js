(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(64)},31:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),s=n.n(o),i=(n(31),n(1)),l=n.n(i),u=n(4),c=n(3),d=n(18),m=n(19),f=n(23),h=n(20),p=n(24),v=function(){return r.a.createElement("div",{className:"logo"},r.a.createElement("span",null,r.a.createElement("strong",null,"NoteOwl")),r.a.createElement("br",null),r.a.createElement("span",null,"Logo"),r.a.createElement("br",null),r.a.createElement("span",null,"Pending"))},g=function(e){var t=e.filter,n=e.handleInputChange;return r.a.createElement("div",{className:"d-none"},r.a.createElement("input",{placeholder:"Filter notes",value:t,name:"filter",onChange:n(null)}))},w=function(e){var t=e.loginMessage;return t?r.a.createElement("div",null,r.a.createElement("p",null,t)):null},E=function(e){var t=e.type,n=e.placeholder,a=e.name,o=e.value,s=e.handleInputChange;return r.a.createElement("div",{className:"owl-field"},r.a.createElement("input",{type:t,placeholder:n,name:a,value:o,onChange:s(null)}),r.a.createElement("span",{className:"border"}))},b=function(e){var t=e.login,n=e.username,a=e.password,o=e.handleInputChange,s=e.loginMessage;return r.a.createElement("div",{id:"login"},r.a.createElement(w,{loginMessage:s}),r.a.createElement("form",{onSubmit:t},r.a.createElement(E,{type:"text",placeholder:"Username",name:"username",value:n,handleInputChange:o}),r.a.createElement(E,{type:"password",placeholder:"Password",name:"password",value:a,handleInputChange:o}),r.a.createElement("button",{type:"submit"},"Login")))},N=function(e){var t=e.user,n=e.logout;return r.a.createElement("div",{id:"logout"},r.a.createElement("span",null,"Signed in as\xa0"),r.a.createElement("span",null,t.username),r.a.createElement("form",{onSubmit:n},r.a.createElement("button",{type:"submit"},"Logout")))},x=function(e){var t=e.login,n=e.logout,a=e.filterValue,o=e.handleInputChange,s=e.username,i=e.password,l=e.user,u=e.loginMessage;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(v,null),r.a.createElement(g,{filterValue:a,handleInputChange:o}),null===l&&r.a.createElement(b,{login:t,username:s,password:i,handleInputChange:o,loginMessage:u}),null!==l&&r.a.createElement(N,{logout:n,user:l}))},C=n(10),y=n.n(C),I=n(21),k=n.n(I),S=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},O=n(22),j=n.n(O),D=function(e){var t=e.text,n=e.date;return null===n?null:r.a.createElement("div",{className:"note-date"},r.a.createElement("span",null,t),r.a.createElement(j.a,{format:"ddd DD MMM YYYY HH:mm"},n))},M=function(e){var t=e.note,n=e.user,a=e.handleRemove;return n&&t.user===n.id||null===t.user?r.a.createElement("button",{type:"button",onClick:a(t)},"Delete"):null},R=function(e){var t=e.colors,n=e.note,a=e.handleInputChange;return r.a.createElement("div",{className:"color-changer"},t.map(function(e){var t=!1;return n.color===e&&(t=!0),r.a.createElement("label",{className:"color-input color-"+e},r.a.createElement("input",{name:"color",value:e,type:"checkbox",checked:t,onChange:a(n)}),r.a.createElement("span",{className:"checkmark"}))}))},T=function(e){var t=e.user,n=e.note,a=e.handleRemove,o=e.handleInputChange,s=e.colors;return r.a.createElement("div",{className:"note-controls"},r.a.createElement(M,{note:n,user:t,handleRemove:a}),r.a.createElement(R,{note:n,handleInputChange:o,colors:s}))},A=function(e){var t=e.note,n=e.user,a=e.handleRemove,o=e.handleDrag,s=e.handleInputChange,i=e.index,l=e.colors,u={zIndex:8e3+i};return r.a.createElement(k.a,{cancel:".note form>*",position:t.position,bounds:"parent",onDrag:o(t)},r.a.createElement("div",{className:"note color-"+t.color,style:u},r.a.createElement(S,{message:t.notification}),r.a.createElement("form",null,r.a.createElement("div",{className:"owl-field"},r.a.createElement(y.a,{onResize:function(e){},value:t.title,name:"title",placeholder:"Title",onChange:s(t)}),r.a.createElement("span",{className:"border"})),r.a.createElement(D,{text:"Created: ",date:t.created}),r.a.createElement(D,{text:"Saved: ",date:t.updated}),r.a.createElement("div",{className:"owl-field"},r.a.createElement(y.a,{onResize:function(e){},value:t.content,name:"content",placeholder:"Add text here",onChange:s(t)}),r.a.createElement("span",{className:"border"})),r.a.createElement(T,{user:n,note:t,handleRemove:a,colors:l,handleInputChange:s}))))},L=function(e){var t=e.notes,n=e.user,a=e.handleRemove,o=e.handleDrag,s=e.saveNote,i=e.handleInputChange,l=e.newNote,u=["yellow","blue","red","green"];return r.a.createElement("div",{id:"notes"},r.a.createElement("button",{onClick:l,type:"button"},"New note"),t.map(function(e,t){return r.a.createElement(A,{key:e.id,note:e,user:n,handleRemove:a,handleDrag:o,saveNote:s,handleInputChange:i,index:t,colors:u})}))},z=n(5),$=n.n(z),Y=null,J={setToken:function(e){Y="bearer ".concat(e)},removeToken:function(){Y=null},getAll:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("/notes");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(u.a)(l.a.mark(function e(t){var n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:Y}},e.next=3,$.a.post("/notes",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(l.a.mark(function e(t){var n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:Y}},e.next=3,$.a.put("".concat("/notes","/").concat(t.id),t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(l.a.mark(function e(t){var n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:Y}},e.next=3,$.a.delete("".concat("/notes","/").concat(t.id),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},F={login:function(){var e=Object(u.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},U=n(6),B=n.n(U),H=n(11),P=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).hideNotification=function(e){setTimeout(function(){var t=n.state.notes.findIndex(function(t){return t.id===e.id});if(t){var a=B()(n.state.notes,Object(c.a)({},t,Object(c.a)({},"notification",{$set:null})));n.setState({notes:a})}},3e3)},n.logout=function(){var e=Object(u.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{J.removeToken(n.state.user.token),window.localStorage.removeItem("user"),n.setState({user:null})}catch(a){n.setState({user:null})}case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.login=function(){var e=Object(u.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,F.login({username:n.state.username,password:n.state.password});case 4:a=e.sent,window.localStorage.setItem("user",JSON.stringify(a)),J.setToken(a.token),n.setState({user:a,username:"",password:""}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),n.setState({loginMessage:"Username and/or password incorrect",password:""}),setTimeout(function(){n.setState({loginMessage:null})},3e3);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),n.newNote=function(){if(!n.state.notes.find(function(e){return 0===e.id})){var e={id:null,title:"",content:"",created:new Date,updated:null,important:!1,notification:null,position:{x:0,y:0},user:null,color:"yellow"};n.setState({notes:n.state.notes.concat(e)})}},n.saveNote=function(e){setTimeout(function(){if(e.title&&e.content)if(n.state.user)null===e.id?J.create(e).then(function(e){e.notification="Note saved";var t=n.state.notes.findIndex(function(e){return 0===e.id}),a=B()(n.state.notes,Object(c.a)({},t,{$set:e}));n.setState({notes:a}),n.hideNotification(e)}).catch(function(e){console.log(e)}):J.update(e).then(function(e){e.notification="Note saved";var t=n.state.notes.findIndex(function(t){return t.id===e.id}),a=B()(n.state.notes,Object(c.a)({},t,{$set:e}));n.setState({notes:a}),n.hideNotification(e)}).catch(function(e){console.log(e)});else{e.notification="Login to save note";var t=n.state.notes.findIndex(function(t){return t.id===e.id}),a=B()(n.state.notes,Object(c.a)({},t,{$set:e}));n.setState({notes:a}),n.hideNotification(e)}},3e3)},n.handleRemove=function(e){return function(){if(!e.author&&window.confirm("Are you sure you want to remove this note?"))if(0===e.id){var t=n.state.notes.filter(function(t){return t.id!==e.id});n.setState({notes:t})}else J.remove(e).then(function(t){var a=n.state.notes.filter(function(t){return t.id!==e.id});n.setState({notes:a})}).catch(function(t){var a=n.state.notes.filter(function(t){return t.id!==e.id});n.setState({notes:a})})}},n.handleDrag=function(e){return function(t,a){var r={x:+e.position.x+ +a.deltaX.toFixed(0),y:+e.position.y+ +a.deltaY.toFixed(0)},o=n.state.notes.findIndex(function(t){return t.id===e.id}),s=B()(n.state.notes,Object(c.a)({},o,Object(c.a)({},"position",{$set:r})));n.setState({notes:s}),n.saveNote(e)}},n.handleInputChange=function(e){return function(t){var a=t.target.value,r=t.target.name;if(e){var o=n.state.notes.findIndex(function(t){return t.id===e.id}),s=B()(n.state.notes,Object(c.a)({},o,Object(c.a)({},r,{$set:a})));n.setState({notes:s}),n.saveNote(e)}else n.setState(Object(c.a)({},r,a))}},n.state={notes:[],filter:"",username:"",password:"",user:null,loginMessage:null},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="NoteOwl";var t=window.localStorage.getItem("user");if(t){var n=JSON.parse(t);this.setState({user:n}),J.setToken(n.token)}J.getAll().then(function(t){e.setState({notes:t})}),H.a.initialize("UA-120584024-4"),H.a.pageview("/")}},{key:"render",value:function(){var e=this,t=this.state.notes.filter(function(t){return t.title.toLowerCase().includes(e.state.filter.toLowerCase())||t.content.toLowerCase().includes(e.state.filter.toLowerCase())});return r.a.createElement("div",{id:"content"},r.a.createElement(x,{login:this.login,logout:this.logout,handleInputChange:this.handleInputChange,filter:this.state.filter,username:this.state.username,password:this.state.password,user:this.state.user,loginMessage:this.state.loginMessage}),r.a.createElement(L,{notes:t,newNote:this.newNote,handleRemove:this.handleRemove,handleDrag:this.handleDrag,user:this.state.user,handleInputChange:this.handleInputChange}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.8cb2205f.chunk.js.map