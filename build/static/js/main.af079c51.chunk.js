(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,n,t){e.exports=t(58)},27:function(e,n,t){},58:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(10),l=t.n(o),c=(t(27),t(1)),u=t.n(c),i=t(4),s=t(3),d=t(7),m=function(){return r.a.createElement("div",{id:"logo"},r.a.createElement("span",null,r.a.createElement("strong",null,"NoteOwl")),r.a.createElement("br",null),r.a.createElement("span",null,"Logo"),r.a.createElement("br",null),r.a.createElement("span",null,"Pending"))},f=function(e){var n=e.filter,t=e.handleInputChange;return r.a.createElement("div",{className:"d-none"},r.a.createElement("input",{placeholder:"Filter notes",value:n,name:"filter",onChange:t(null)}))},p=function(e){var n=e.loginMessage;return n?r.a.createElement("div",null,r.a.createElement("p",null,n)):null},v=function(e){var n=e.type,t=e.placeholder,a=e.name,o=e.value,l=e.handleInputChange;return r.a.createElement("div",{className:"owl-field"},r.a.createElement("input",{type:n,placeholder:t,name:a,value:o,onChange:l(null)}),r.a.createElement("span",{className:"border"}))},h=function(e){var n=e.login,t=e.username,a=e.password,o=e.handleInputChange,l=e.loginMessage;return r.a.createElement("div",{id:"login"},r.a.createElement(p,{loginMessage:l}),r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement(v,{type:"text",placeholder:"Username",name:"username",value:t,handleInputChange:o}),r.a.createElement(v,{type:"password",placeholder:"Password",name:"password",value:a,handleInputChange:o})),r.a.createElement("button",{type:"submit"},"Login")))},g=function(e){var n=e.user,t=e.logout;return r.a.createElement("div",{id:"logout"},r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("span",null,"Signed in as"),r.a.createElement("br",null),r.a.createElement("span",null,n.username)),r.a.createElement("button",{type:"submit"},"Logout")))},E=function(e){var n=e.login,t=e.logout,a=e.filterValue,o=e.handleInputChange,l=e.username,c=e.password,u=e.user,i=e.loginMessage;return r.a.createElement("nav",{id:"navbar"},r.a.createElement(m,null),r.a.createElement(f,{filterValue:a,handleInputChange:o}),null===u&&r.a.createElement(h,{login:n,username:l,password:c,handleInputChange:o,loginMessage:i}),null!==u&&r.a.createElement(g,{logout:t,user:u}))},w=t(11),b=t.n(w),x=t(19),O=t.n(x),j=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"notification"},n)},C=t(20),y=t.n(C),I=function(e){var n=e.text,t=e.date;return r.a.createElement("div",{className:"note-date"},r.a.createElement("span",null,n),null===t&&r.a.createElement("span",null,"Never"),null!==t&&r.a.createElement(y.a,{format:"ddd DD MMM YYYY HH:mm"},t))},k=function(e){var n=e.note,t=e.user,a=e.handleRemove;return t&&n.user===t.id||null===n.user?r.a.createElement("button",{type:"button",onClick:a(n)},"Delete"):null},N=function(e){var n=e.colors,t=e.note,a=e.handleInputChange;return r.a.createElement("div",{className:"color-changer"},n.map(function(e){var n=!1;return t.color===e&&(n=!0),r.a.createElement("label",{className:"color-input color-"+e},r.a.createElement("input",{name:"color",value:e,type:"checkbox",checked:n,onChange:a(t)}),r.a.createElement("span",{className:"checkmark"}))}))},S=function(e){var n=e.user,t=e.note,a=e.handleRemove,o=e.handleInputChange,l=e.colors;return r.a.createElement("div",{className:"note-controls"},r.a.createElement(k,{note:t,user:n,handleRemove:a}),r.a.createElement(N,{note:t,handleInputChange:o,colors:l}))},T=function(e){var n=e.note,t=e.user,a=e.handleRemove,o=e.handleDrag,l=e.handleInputChange,c=e.index,u=e.colors,i={zIndex:8e3+c};return r.a.createElement(O.a,{cancel:".note form>*",position:n.position,bounds:"parent",onDrag:o(n)},r.a.createElement("div",{className:"note color-"+n.color,style:i},r.a.createElement(j,{message:n.notification}),r.a.createElement("form",null,r.a.createElement("div",{className:"owl-field"},r.a.createElement(b.a,{onResize:function(e){},value:n.title,name:"title",placeholder:"Title",onChange:l(n)}),r.a.createElement("span",{className:"border"})),r.a.createElement(I,{text:"Created: ",date:n.created}),r.a.createElement(I,{text:"Saved: ",date:n.updated}),r.a.createElement("div",{className:"owl-field"},r.a.createElement(b.a,{onResize:function(e){},value:n.content,name:"content",placeholder:"Add text here",onChange:l(n)}),r.a.createElement("span",{className:"border"})),r.a.createElement(S,{user:t,note:n,handleRemove:a,colors:u,handleInputChange:l}))))},D=function(e){var n=e.notes,t=e.user,a=e.handleRemove,o=e.handleDrag,l=e.saveNote,c=e.handleInputChange,u=e.newNote,i=["yellow","blue","red","green"];return r.a.createElement("div",{id:"notes"},r.a.createElement("button",{onClick:u,type:"button"},"New note"),n&&n.map(function(e,n){return r.a.createElement(T,{key:e.id,note:e,user:t,handleRemove:a,handleDrag:o,saveNote:l,handleInputChange:c,index:n,colors:i})}))},A=t(5),L=t.n(A),R="/api/notes/",M=null,$={setToken:function(e){M="bearer ".concat(e)},removeToken:function(){M=null},getAll:function(){var e=Object(i.a)(u.a.mark(function e(){var n,t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:M}},e.next=3,L.a.get(R,n);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(u.a.mark(function e(n){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:M}},e.next=3,L.a.post(R,n,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(u.a.mark(function e(n){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:M}},e.next=3,L.a.put("".concat(R).concat(n.id),n,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(u.a.mark(function e(n){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:M}},e.next=3,L.a.delete("".concat(R).concat(n.id),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},z={login:function(){var e=Object(i.a)(u.a.mark(function e(n){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("/api/login/",n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},Y=t(6),J=t.n(Y),U=t(12),F=function(e){var n=Object(a.useState)(e.notes),t=Object(d.a)(n,2),o=t[0],l=t[1],c=Object(a.useState)(null),m=Object(d.a)(c,2),f=m[0],p=m[1],v=Object(a.useState)(""),h=Object(d.a)(v,2),g=h[0],w=(h[1],Object(a.useState)("")),b=Object(d.a)(w,2),x=b[0],O=b[1],j=Object(a.useState)(""),C=Object(d.a)(j,2),y=C[0],I=C[1],k=Object(a.useState)(""),N=Object(d.a)(k,2),S=N[0],T=N[1];Object(a.useEffect)(function(){console.log("Using effect"),document.title="NoteOwl";var e=window.localStorage.getItem("user");if(e){var n=JSON.parse(e);p(n),$.setToken(n.token)}$.getAll().then(function(e){l(e)}),U.a.initialize("UA-120584024-4"),U.a.pageview("/")},[]);var A=function(e){setTimeout(function(){var n=o.findIndex(function(n){return n.id===e.id});if(n>-1){var t=J()(o,Object(s.a)({},n,Object(s.a)({},"notification",{$set:null})));l(t)}},3e3)},L=function(){var e=Object(i.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{$.removeToken(f.token),window.localStorage.removeItem("user"),p(null),$.getAll().then(function(e){return l(e)})}catch(t){p(null)}case 2:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(u.a.mark(function e(n){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,z.login({username:x,password:y});case 4:t=e.sent,window.localStorage.setItem("user",JSON.stringify(t)),$.setToken(t.token),p(t),O(""),I(""),o.map(function(e){return!0===e.modified?M(e):null}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),T("Username and/or password incorrect"),I(""),setTimeout(function(){return T("")},3e3);case 18:case"end":return e.stop()}},e,null,[[1,13]])}));return function(n){return e.apply(this,arguments)}}(),M=function(e){e.title&&e.content&&(clearTimeout(e.saveTimeout),e.saveTimeout=setTimeout(function(){if(f)null===e.id?$.create(e).then(function(e){e.notification="Note saved";var n=o.findIndex(function(e){return null===e.id}),t=J()(o,Object(s.a)({},n,{$set:e}));l(t),A(e)}).catch(function(e){return console.log(e)}):$.update(e).then(function(e){e.notification="Note saved";var n=o.findIndex(function(n){return n.id===e.id}),t=J()(o,Object(s.a)({},n,{$set:e}));l(t),A(e)}).catch(function(e){return console.log(e)});else{e.notification="Login to save note";var n=o.findIndex(function(n){return n.id===e.id}),t=J()(o,Object(s.a)({},n,{$set:e}));l(t),A(e)}},3e3))},Y=function(e){return function(n){var t=n.target.value,a=n.target.name;if(e){var r,c=o.findIndex(function(n){return n.id===e.id}),u=J()(o,Object(s.a)({},c,(r={},Object(s.a)(r,"modified",{$set:!0}),Object(s.a)(r,a,{$set:t}),r)));l(u),M(o[c])}else console.log("uh oh")}},F=o?o.filter(function(e){return console.log(e.title.toLowerCase().includes(g.toLowerCase())),e.title.toLowerCase().includes(g.toLowerCase())||e.content.toLowerCase().includes(g.toLowerCase()),e}):[];return r.a.createElement("div",{id:"content"},r.a.createElement(E,{login:R,logout:L,handleInputChange:Y,filter:g,username:x,password:y,user:f,loginMessage:S}),r.a.createElement(D,{notes:F,newNote:function(){if(!o.find(function(e){return null===e.id})){var e={id:null,title:"",content:"",created:new Date,updated:null,important:!1,notification:null,position:{x:0,y:0},user:null,color:"yellow"};l(o.concat(e))}},handleRemove:function(e){return function(){if(!e.author&&window.confirm("Are you sure you want to remove this note?"))if(null===e.id){var n=o.filter(function(n){return n.id!==e.id});l(n)}else $.remove(e).then(function(n){var t=o.filter(function(n){return n.id!==e.id});l(t)}).catch(function(n){var t=o.filter(function(n){return n.id!==e.id});l(t)})}},handleDrag:function(e){return function(n,t){var a,r={x:+e.position.x+ +t.deltaX.toFixed(0),y:+e.position.y+ +t.deltaY.toFixed(0)},c=o.findIndex(function(n){return n.id===e.id}),u=J()(o,Object(s.a)({},c,(a={},Object(s.a)(a,"modified",{$set:!0}),Object(s.a)(a,"position",{$set:r}),a)));l(u),M(o[c])}},user:f,handleInputChange:Y}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.af079c51.chunk.js.map